{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>My Hotel</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/base.css' %}">


</head>
<body>

<nav>
    <div>
    <a href="/">My Hotel</a>

    <!-- ROOMS DROPDOWN -->
    <div class="dropdown">
        <a href="#" class="dropbtn">Rooms â–¾</a>
        <div class="dropdown-content">
            {% for room in nav_rooms %}
                <a href="/rooms/{{ room.id }}/">
                    {{ room.get_room_type_display }} Room
                </a>
            {% endfor %}
        </div>
    </div>

    <a href="/bookings/book/">Book Room</a>

        {% if user.is_staff %}
            <a href="{% url 'admin_dashboard' %}">Dashboard</a>
        {% endif %}

</div>


    <div>
        {% if user.is_authenticated %}
            Welcome, <a href="{% url 'profile' %}">{{ user.username }}</a> |
        <form method="post" action="/accounts/logout/" style="display: inline;">
    {% csrf_token %}
    <button type="button" onclick="openLogoutModal()" class="logout-btn">
        Logout
    </button>
</form>

        {% else %}
            <a href="/accounts/login/">Login</a>
            <a href="/accounts/signup/">Sign Up</a>
        {% endif %}
    </div>
</nav>

<div class="container">
    {% block content %}{% endblock %}
</div>

<!-- ===== LOGOUT MODAL ===== -->
<div id="logoutModal" class="modal">
    <div class="modal-box">
        <h2>Logout?</h2>
        <p>Are you sure you want to end your session?</p>

        <div class="modal-actions">
            <button class="cancel-btn" onclick="closeLogoutModal()">Cancel</button>

            <form method="post" action="/accounts/logout/">
                {% csrf_token %}
                <button type="submit" class="confirm-btn">Yes, Logout</button>
            </form>
        </div>
    </div>
</div>

<script>
function openLogoutModal() {
    document.getElementById("logoutModal").style.display = "flex";
}

function closeLogoutModal() {
    document.getElementById("logoutModal").style.display = "none";
}

// close if clicked outside
window.onclick = function(e) {
    const modal = document.getElementById("logoutModal");
    if (e.target === modal) {
        modal.style.display = "none";
    }
}
</script>
</body>
</html>
